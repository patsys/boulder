check process syslog
  with pidfile "/var/run/rsyslogd.pid"
  start program = "/usr/sbin/rsyslogd -f /etc/rsyslog.conf"
  stop program = "/bin/cat /var/run/rsyslogd.pid | /usr/bin/xargs /bin/kill" 

check host sd-test-srv with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper sd-test-srv start sd-test-srv --listen :53"
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper sd-test-srv stop"
  DEPENDS on syslog
  if failed
    port 53
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

check host boulder-remoteva with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper boulder-remoteva start boulder-remoteva --config /opt/boulder/config/va-remote-a.json"
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper boulder-remoteva stop"
  DEPENDS on syslog, sd-test-srv
  if failed
    port 9097
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

check host boulder-sa with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper boulder-sa start boulder-sa --config /opt/boulder/config/sa.json --addr sa.$INTERNAL_DOMAIN:9095"
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper boulder-sa stop"
  DEPENDS on syslog, sd-test-srv
  if failed
    port 9095
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

check host ct-test-srv with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper ct-test-srv start ct-test-srv --config /opt/boulder/config/ct-test-srv/ct-test-srv.json" 
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper ct-test-srv stop"
  DEPENDS on syslog
  if failed
    port 4500
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

check host boulder-publisher with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper boulder-publisher start boulder-publisher --config /opt/boulder/config/publisher.json --addr publisher.$INTERNAL_DOMAIN:9091 --debug-addr :8009" 
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper boulder-publisher stop"
  DEPENDS on syslog, sd-test-srv
  if failed
    port 4500
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

check host mail-test-srv with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper mail-test-srv start mail-test-srv --closeFirst 5 --cert /opt/boulder/config/secrets/ca/mail-test-srv/cert.pem --key /opt/boulder/config/secrets/ca/mail-test-srv/key.pem" 
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper mail-test-srv stop"
  DEPENDS on syslog
  if failed
    port 9380
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

check host ocsp-responder with address 127.0.0.1
  start program = "/opt/monit/monit-wrapper ocsp-responder start ocsp-responder --config /opt/boulder/config/ocsp-responder.json" 
  with timeout 90 seconds
  stop program = "/opt/monit/monit-wrapper ocsp-responder stop"
  DEPENDS on syslog
  if failed
    port 8005
    for 15 cycles
  then EXEC "/opt/monit/monit-kill"

#[program:boulder-va]
#command=boulder-va --config /opt/boulder/config/va.json --addr va.$INTERNAL_DOMAIN:9092 --debug-addr ":8004"
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running boulder-remoteva:running  syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:boulder-ca]
#command=boulder-ca  --config /opt/boulder/config/ca-a.json --ca-addr ca.$INTERNAL_DOMAIN:9093 --ocsp-addr ca.$INTERNAL_DOMAIN:9096 --debug-addr ":8001"
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running boulder-sa:running syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:akamai-test-srv]
#command=akamai-test-srv --listen localhost:6789 --secret "$AKAMAI_SECRET" 
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:akamai-purger]
#command=akamai-purger --config /opt/boulder/config/akamai-purger.json
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running akamai-test-srv:running syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:ocsp-updater]
#command=ocsp-updater --config /opt/boulder/config/ocsp-updater.json
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running boulder-ca:running syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:boulder-ra]
#command=boulder-ra --config /opt/boulder/config/ra.json --addr ra.$NTERNAL_DOMAIN:9094 --debug-addr ":8002"
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running boulder-sa:running boulder-ca-a:running boulder-va:running akamai-purger:running boulder-publisher:running syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:bad-key-revoker]
#command=bad-key-revoker --config /opt/boulder/config/bad-key-revoker.json
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running boulder-ra:running mail-test-srv:running syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:nonce-service]
#command=nonce-service --config /opt/boulder/config/nonce.json --addr nonce.$INTERNAL_DOMAIN:9101 --debug-addr :8111 --prefix taro
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running syslog:running
#autostart=false
#stopsignal=QUIT
#
#[program:boulder-wfe]
#command=boulder-wfe --config /opt/boulder/config/wfe.json
#stdout_logfile=/dev/stdout
#stdout_logfile_maxbytes=0
#stderr_logfile=/dev/stderr
#stderr_logfile_maxbytes=0
#dependent_startup=true
#dependent_startup_wait_for=sd-test-srv:running boulder-ra:running boulder-sa:running nonce-service:running syslog:running
#autostart=false
#stopsignal=QUIT
